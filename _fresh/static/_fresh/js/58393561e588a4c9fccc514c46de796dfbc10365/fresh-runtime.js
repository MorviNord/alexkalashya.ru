import{a as j}from"./chunk-KS2W7DPZ.js";import{a as B,c as m,d as T,e as q,f as X}from"./chunk-AFUTOR6E.js";typeof globalThis>"u"&&(window.globalThis=window);var L="data-current",C="data-ancestor",K="data-frsh-key",A="f-client-nav",G="__frsh_c",M=function(t){return t[t.None=0]="None",t[t.Ancestor=1]="Ancestor",t[t.Current=2]="Current",t}({});function J(t,e){let r=new URL(e,"http://localhost").pathname;return r!=="/"&&r.endsWith("/")&&(r=r.slice(0,-1)),t!=="/"&&t.endsWith("/")&&(t=t.slice(0,-1)),t===r?2:t.startsWith(r+"/")||r==="/"?1:0}var y=function(t){return t[t.Replace=0]="Replace",t[t.Append=1]="Append",t[t.Prepend=2]="Prepend",t}({});function P(t,e){if(!t.startsWith("/")||t.startsWith("//"))return t;try{let r=new URL(t,"https://freshassetcache.local");return r.protocol!=="https:"||r.host!=="freshassetcache.local"||r.searchParams.has(G)?t:(r.searchParams.set(G,e),r.pathname+r.search+r.hash)}catch(r){return console.warn(`Failed to create asset() URL, falling back to regular path ('${t}'):`,r),t}}function Z(t,e){if(t.includes("("))return t;let r=t.split(","),i=[];for(let n of r){let o=n.trimStart(),s=n.length-o.length;if(o==="")return t;let l=o.indexOf(" ");l===-1&&(l=o.length);let f=n.substring(0,s),a=o.substring(0,l),c=o.substring(l);i.push(f+P(a,e)+c)}return i.join(",")}function z(t,e){if(t.type==="img"||t.type==="source"){let{props:r}=t;if(r["data-fresh-disable-lock"])return;typeof r.src=="string"&&(r.src=P(r.src,e)),typeof r.srcset=="string"&&(r.srcset=Z(r.srcset,e))}}var Q="58393561e588a4c9fccc514c46de796dfbc10365";var pt=B.vnode;B.vnode=t=>{if(z(t,Q),typeof t.type=="string"&&A in t.props){let e=t.props[A];typeof e=="boolean"&&(t.props[A]=String(e))}pt?.(t)};function D(t,e){let r=JSON.parse(t);if(!Array.isArray(r))return N([],[],r,e);let i=new Array(r.length);return N(r,i,0,e),i[0]}function N(t,e,r,i){switch(r){case-1:return;case-2:return null;case-3:return NaN;case-4:return 1/0;case-5:return-1/0;case-6:return-0}if(r in e)return e[r];let n=t[r];if(typeof n=="number")return e[r]=n;if(typeof n=="string"||typeof n=="boolean"||n===null)return e[r]=n;if(Array.isArray(n))if(n.length>0&&typeof n[0]=="string"){let o=n[0];if(i!==void 0&&o in i){let s=i[o],l=n[1],f=N(t,e,l,i);return e[r]=s(f)}switch(o){case"BigInt":return e[r]=BigInt(n[1]);case"Date":return e[r]=new Date(n[1]);case"RegExp":return e[r]=new RegExp(n[1],n[2]);case"Set":{let s=new Set;for(let l=0;l<n[1].length;l++){let f=n[1][l];s.add(N(t,e,f,i))}return e[r]=s}case"Map":{let s=new Map;for(let l=0;l<n[1].length;l++){let f=n[1][l++],a=N(t,e,f,i),c=n[1][l],u=N(t,e,c,i);s.set(a,u)}return e[r]=s}case"Uint8Array":return e[r]=Nt(n[1])}}else{let o=new Array(n.length);e[r]=o;for(let s=0;s<n.length;s++){let l=n[s];l!==-7&&(o[s]=N(t,e,l,i))}return o}else if(typeof n=="object"){let o={};e[r]=o;let s=Object.keys(n);for(let l=0;l<s.length;l++){let f=s[l],a=n[f];o[f]=N(t,e,a,i)}return o}}function Nt(t){let e=atob(t),r=e.length,i=new Uint8Array(r);for(let n=0;n<r;n++)i[n]=e.charCodeAt(n);return i}var et=Symbol.for("_FRESH_SLOT");function Tt(t){return t!==null&&typeof t=="object"&&"kind"in t&&t.kind===et}var b=new Map,E=class extends q{componentDidMount(){b.set(this.props.name,this)}render(){return this.props.children}};E.displayName="Partial";function $(t,e,r,i,n){let o=()=>{for(let s in t){let l=t[s];if(Tt(l)){let f=i.get(l.id);if(f!==void 0){let a=m(T,null),c=v(r,f.start,f.end);R(n,[a],[2],c,f.end),t[s]=a}else{let a=document.querySelector(`#frsh-${l.id}-${l.name}`);if(a!==null){let c=m(T,null);R(n,[c],[2],a.content,null),t[s]=c}}}}X(m(e,t),r)};"scheduler"in window?scheduler.postTask(o):setTimeout(o,0)}var w=new Map,W={Signal:t=>j(t),Slot:t=>({kind:et,name:t.name,id:t.id})};function bt(){return{roots:[],stack:[],slots:new Map,slotIdStack:[]}}function Et(t,e){let r=bt();rt(r,document.body);let i=Object.keys(t);for(let o=0;o<i.length;o++){let s=i[o];w.set(s,t[s])}let n=D(e,W);for(let o=0;o<r.roots.length;o++){let s=r.roots[o],l=v(s.start.parentNode,s.start,s.end);if(s.kind===0){let f=n[s.propsIdx].props,a=w.get(s.name);$(f,a,l,r.slots,n)}else if(s.kind===1){let f={name:s.name,children:null},a=m(T,null);R(n,[a],[1],l,s.end),f.children=a.props.children,$(f,E,l,r.slots,n)}}}var nt=!1;function tt(t){return t.nodeType===Node.TEXT_NODE&&typeof t._frshMarker=="string"}function g(t){if(nt)return t;let e=new Text("");return e._frshMarker=t.data,t.parentNode.insertBefore(e,t),t.remove(),e}function rt(t,e){if(O(e)){if(e.nodeName==="SCRIPT"||e.nodeName==="STYLE"||t.slotIdStack.length>0)return;for(let r=0;r<e.childNodes.length;r++){let i=e.childNodes[r];rt(t,i)}}else if(U(e)){let r=e.data;if(r.startsWith("frsh:")){e=g(e);let i=r.split(":"),n=i[1];if(n==="island"){let o=i[2],s=i[3],l=i[4],f={kind:0,name:o,propsIdx:Number(s),key:l===""?null:l,start:e,end:null};t.stack.length===0&&t.roots.push(f),t.stack.push(f)}else if(n==="slot"){let o=+i[2],s=i[3];t.slotIdStack.push(o),t.slots.set(o,{name:s,start:e,end:null})}else if(n==="partial"){let o=i[2],s=i[3],l={kind:1,name:o,key:s===""?null:s,start:e,end:null};t.stack.length===0&&t.roots.push(l),t.stack.push(l)}}else if(r==="/frsh:island"||r==="/frsh:partial"){e=g(e);let i=t.stack.pop();i!==void 0&&(i.end=e)}else if(r==="/frsh:slot"){e=g(e);let i=t.slotIdStack.pop();i!==void 0&&(t.slots.get(i).end=e)}}}var ot=function(t){return t[t.Island=0]="Island",t[t.Partial=1]="Partial",t[t.Slot=2]="Slot",t}({});function Rt(t){return t.children}function R(t,e,r,i,n){let o=i;for(;o!==null;){if(o===n)return;if(o._frshRootFrag||o instanceof DocumentFragment){let s=o.firstChild;s!==null&&R(t,e,r,s,n)}else if(O(o)){let s={};for(let u=0;u<o.attributes.length;u++){let p=o.attributes[u];if(p.nodeName===K){s.key=p.nodeValue;continue}s[p.nodeName]=typeof o[p.nodeName]=="boolean"?!0:p.nodeValue}let l=m(o.localName,s),f=r.at(-1),a=f===2||f===1;a&&(_(e.at(-1),l),e.push(l));let c=o.firstChild;c!==null&&R(t,e,r,c,n),a&&e.pop()}else if(U(o)||tt(o)){let s=tt(o)?o._frshMarker:o.data;if(s.startsWith("frsh:")){let l=s.split(":"),f=l[1];if(f==="island"){o=g(o),r.push(0);let a=l[2],c=l[3],u=l[4],p=w.get(a);if(p===void 0)throw new Error(`Encountered unknown island: ${a}`);let d=t[+c].props;d.key=u===""?void 0:u;let h=m(p,d);_(e.at(-1),h),e.push(h)}else if(f==="slot"){o=g(o),r.push(2);let a=+l[2],c=l[3],u=l[4],p=m(Rt,{key:u===""?void 0:u,id:a,name:c,children:[]}),d=e.at(-1);d.props[c]=p,e.push(p)}else if(f==="partial"){o=g(o),r.push(1);let a=l[2],c=+l[3],u=l[4],p=m(E,{name:a,key:u===""?void 0:u,mode:c}),d=e.at(-1);if(d!==void 0&&_(d,p),c===y.Append){let h=b.get(a);if(h!==void 0){S(p.props,h.props.children);let I=m(T,null);_(p,I),p=I}}else if(c===y.Prepend){let h=b.get(a);if(h!==void 0){S(p.props,h.props.children);let I=m(T,null);p.props.children||(p.props.children=[]),p.props.children.unshift(I),p=I}}e.push(p)}else if(f==="key"){if(!nt){let c=o;o=o.nextSibling,c.remove()}let a=m(T,{key:l[2]});_(e.at(-1),a),e.push(a);continue}}else s==="/frsh:island"||s==="/frsh:slot"||s==="/frsh:partial"?(e.pop(),r.pop(),o=g(o)):s==="/frsh:key"&&(e.pop(),o=g(o))}else if(_t(o)){let s=r.at(-1);(s===2||s===1)&&_(e.at(-1),o.data)}o=o.nextSibling}}function _(t,e){t.props.children||(t.props.children=[]),t.props.children.push(e)}function S(t,e){t.children=e!=null?Array.isArray(e)?e:[e]:[]}function U(t){return t.nodeType===Node.COMMENT_NODE}function _t(t){return t.nodeType===Node.TEXT_NODE}function O(t){return t.nodeType===Node.ELEMENT_NODE&&!("_frshRootFrag"in t)}function v(t,e,r){let i={_frshRootFrag:!0,nodeType:1,parentNode:t,nextSibling:null,get firstChild(){let n=e.nextSibling;return n===r?null:n},get childNodes(){let n=[],o=e.nextSibling;for(;o!==null&&o!==r;)n.push(o),o=o.nextSibling;return n},insertBefore(n,o){t.insertBefore(n,o??r)},appendChild(n){t.insertBefore(n,r)},removeChild(n){t.removeChild(n)},contains(n){if(n===null)return!1;let o=i.childNodes;for(let s=0;s<o.length;s++)if(o[s].contains(n))return!0;return!1}};return i}var F="/_frsh",Bt=`${F}/error_overlay`,Mt=`${F}/alive`,st="fresh-partial";var H="f-partial",V=class extends Error{};function Y(t){let e=t.closest(`[${A}]`);return e===null?!1:e.getAttribute(A)!=="false"}var x=history.state?.index||0;if(!history.state){let t={index:x,scrollX,scrollY};history.replaceState(t,document.title)}function it(t){if(t.href!==globalThis.location.href){let e={index:x,scrollX:globalThis.scrollX,scrollY:globalThis.scrollY};history.replaceState({...e},"",location.href),x++,e.scrollX=0,e.scrollY=0,history.pushState(e,"",t.href)}}document.addEventListener("click",async t=>{let e=t.target;if(e&&(e instanceof HTMLElement||e instanceof SVGElement)){let r=e;if(e.nodeName!=="A"&&(e=e.closest("a")),e===null&&(e=r.closest("button")),e&&e instanceof HTMLAnchorElement&&e.href&&(!e.target||e.target==="_self")&&e.origin===location.origin&&t.button===0&&!(t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||t.button)&&!t.defaultPrevented){let i=e.getAttribute(H);if(e.getAttribute("href")?.startsWith("#")||!Y(e))return;let n=e._freshIndicator;n!==void 0&&(n.value=!0),t.preventDefault();let o=new URL(e.href);try{it(o);let s=new URL(i||o.href,location.href);await k(o,s),lt(o),scrollTo({left:0,top:0,behavior:"instant"})}finally{n!==void 0&&(n.value=!1)}}else if(e&&e instanceof HTMLButtonElement&&(e.type!=="submit"||e.form===null)){let i=e.getAttribute(H);if(i===null||!Y(e))return;let n=new URL(i,location.href);await k(n,n)}}});addEventListener("popstate",async t=>{if(t.state===null){history.scrollRestoration&&(history.scrollRestoration="auto");return}let e=history.state;x=e.index??x+1;let i=document.querySelector(`[${A}]`);if(i===null||i.getAttribute(A)==="false"){location.reload();return}history.scrollRestoration&&(history.scrollRestoration="manual");let n=new URL(location.href,location.origin);try{await k(n,n),lt(n),scrollTo({left:e.scrollX??0,top:e.scrollY??0,behavior:"instant"})}catch(o){if(o instanceof V){location.reload();return}throw o}});document.addEventListener("submit",async t=>{let e=t.target;if(e!==null&&e instanceof HTMLFormElement&&!t.defaultPrevented){if(!Y(e)||t.submitter!==null&&!Y(t.submitter))return;let r=t.submitter?.getAttribute("formmethod")?.toLowerCase()??e.method.toLowerCase();if(r!=="get"&&r!=="post")return;let i=t.submitter?.getAttribute(H)??t.submitter?.getAttribute("formaction")??e.getAttribute(H)??e.action,n=t.submitter?.getAttribute("formaction")??e.action;if(i!==""){t.preventDefault();let o=new URL(i,location.href),s=new URL(n,location.href),l;r==="get"?new URLSearchParams(new FormData(e,t.submitter)).forEach((a,c)=>o.searchParams.append(c,a)):l={body:new FormData(e,t.submitter),method:r},await k(s,o,l)}}});function lt(t){document.querySelectorAll("a").forEach(e=>{let r=J(t.pathname,e.href);r===M.Current?(e.setAttribute(L,"true"),e.setAttribute("aria-current","page"),e.removeAttribute(C)):r===M.Ancestor?(e.setAttribute(C,"true"),e.setAttribute("aria-current","true"),e.removeAttribute(L)):(e.removeAttribute(L),e.removeAttribute(C),e.removeAttribute("aria-current"))})}async function k(t,e,r={}){r.redirect="follow",e=new URL(e),e.searchParams.set(st,"true");let i=await fetch(e,r);if(i.redirected){let n=new URL(i.url);n.origin===t.origin&&(t=n)}it(t),await It(i)}async function It(t){if(t.headers.get("Content-Type")!=="text/html; charset=utf-8")throw new Error("Unable to process partial response.");let r=t.headers.get("X-Fresh-Id"),i=await t.text(),n=new DOMParser().parseFromString(i,"text/html"),o=n.querySelector(`#__FRSH_STATE_${r}`),s=[];if(o!==null){let f=JSON.parse(o.textContent),a=[];s=D(f.props,W);for(let c=0;c<f.islands.length;c++){let u=f.islands[c];a.push(import(u.chunk).then(p=>{w.set(u.name,p[u.exportName])}))}await Promise.all(a)}let l={foundPartials:0};if(n.title&&(document.title=n.title),Array.from(n.head.childNodes).forEach(f=>{let a=f;if(a.nodeName!=="TITLE"){if(a.nodeName==="META"){let c=a;if(c.hasAttribute("charset"))return;let u=c.name;if(u!==""){let p=document.head.querySelector(`meta[name="${u}"]`);p!==null?p.content!==c.content&&(p.content=c.content):document.head.appendChild(c)}else{let p=a.getAttribute("property"),d=document.head.querySelector(`meta[property="${p}"]`);d!==null?d.content!==c.content&&(d.content=c.content):document.head.appendChild(c)}}else if(a.nodeName==="LINK"){let c=a;if(c.rel==="modulepreload")return;c.rel==="stylesheet"&&Array.from(document.head.querySelectorAll("link")).find(p=>p.href===c.href)===void 0&&document.head.appendChild(c)}else if(a.nodeName==="SCRIPT"){if(a.src===`${F}/fresh-runtime.js`)return}else if(a.nodeName==="STYLE"){let c=a;c.id===""&&document.head.appendChild(c)}}}),ct(l,s,n.body),l.foundPartials===0)throw new V(`Found no partials in HTML response. Please make sure to render at least one partial. Requested url: ${t.url}`)}function ct(t,e,r){let i=null,n=r.firstChild,o=0,s="",l="",f=y.Replace;for(;n!==null;){if(U(n)){let a=n.data,c=a.split(":");if(c[0]==="frsh"&&(n=g(n)),c[0]==="frsh"&&c[1]==="partial")++o===1&&(i=n,s=c[2],f=+c[3],l=c[4]);else if(a==="/frsh:partial"){if(t.foundPartials++,--o>0){n=n.nextSibling;continue}let u=v(r,i,n),p=m(E,{key:l!==""?l:void 0,name:s,mode:f,children:null});R(e,[p],[ot.Partial],u,n);let d=b.get(s);if(d===void 0)console.warn(`Partial "${s}" not found. Skipping...`);else{if(f===y.Replace)d.props.children=p.props.children;else if(f===y.Append){let h=b.get(s);h!==void 0?(S(d.props,h.props.children),d.props.children.push(p.props.children)):d.props.children=p.props.children}else if(f===y.Prepend){let h=b.get(s);h!==void 0?(S(d.props,h.props.children),d.props.children.unshift(p.props.children)):d.props.children=p.props.children}d.setState({})}}}else o===0&&O(n)&&ct(t,e,n);n=n.nextSibling}}var at="58393561e588a4c9fccc514c46de796dfbc10365";var wt=typeof document<"u";function St(t){return P(t,at)}function ft(t){return t.children}ft.displayName="Partial";export{wt as IS_BROWSER,ft as Partial,St as asset,Et as boot,$ as revive};
